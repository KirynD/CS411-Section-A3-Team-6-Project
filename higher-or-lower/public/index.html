<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Web site created using create-react-app"
    />
    <link rel="stylesheet" href="style.css" />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <title>React App</title>
    

  </head>
  <body>

    <script>
      const characters ='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';

function generateRandomSearch() {
  const randomCharacter = characters.charAt(Math.floor(Math.random() * characters.length))
  let randomSearch = '';
  switch (Math.round(Math.random())) {
    case 0:
      randomSearch = randomCharacter + '%';
      break;
    case 1:
      randomSearch = '%' + randomCharacter + '%';
      break;
    default:
      randomSearch = '%' + randomCharacter;
  }
  return randomSearch;
}

var myHeaders = new Headers();

var requestOptions = {
  method: 'GET',
  redirect: 'follow',
  headers: myHeaders
};
var followers = new Array();
  var score = 0
  var followersLeft = 0;
  var followersRight = 0;
  
  var data;
  async function getapi(url) {
    
    // Storing response
    const response = await fetch(url, requestOptions);
    
    // Storing data in form of JSON
    data = await response.json();
    console.log(data);

    show(data);
}
// getapi for a single one
async function getapiSingleLeft(url) {
    
    // Storing response
    const response = await fetch(url, requestOptions);
    
    // Storing data in form of JSON
    data = await response.json();
    console.log(data);

    showSingleLeft(data);
}

async function getapiSingleRight(url) {
    
    // Storing response
    const response = await fetch(url, requestOptions);
    
    // Storing data in form of JSON
    data = await response.json();
    console.log(data);

    showSingleRight(data);
}





  function show(data) {
    const tab = [];
    for (let i = 0; i< 2; i++) {
      tab[i] = 
      `<tr>
      </tr>`;
      tab[i] += `<tr>
      <td>${data.artists.items[i].name} </td>
      </tr>`;
      // const six = tab[0];
      
      followers.push(data.artists.items[i].followers.total);
    }
    followersLeft = followers[0];
    followersRight = followers[1];
    const six = document.getElementById("option1").innerHTML = tab[0];
    const seven = document.getElementById("option2").innerHTML = tab[1];
  }

  function showSingleLeft(data) {
    const tab = [];
      tab[0] = 
      `<tr>
      </tr>`;
      tab[0] += `<tr>
      <td>${data.artists.items[0].name} </td>
      </tr>`;
      // const six = tab[0];
      
      followersRight = data.artists.items[0].followers.total;
      console.log(followersLeft);
      console.log(followersRight);
    const six = document.getElementById("option2").innerHTML = tab[0];
    
  }

  function showSingleRight(data) {
    const tab = [];
      tab[0] = 
      `<tr>
      </tr>`;
      tab[0] += `<tr>
      <td>${data.artists.items[0].name} </td>
      </tr>`;
      // const six = tab[0];
      
      followersLeft = data.artists.items[0].followers.total;
      console.log(followersLeft);
      console.log(followersRight);
    const seven = document.getElementById("option1").innerHTML = tab[0];
  }


  // https://v1.nocodeapi.com/dbuildster/spotify/cWNDcmiNimyBqRqw

  function startGame() {
    const api_call = "https://v1.nocodeapi.com/theifhawk/spotify/cnBRhVmxDYwbcgKY/search?q=" + generateRandomSearch() + "&type=artist&perPage=2";
    document.getElementById("option1").innerHTML = (getapi(api_call));
    document.getElementById("option2").innerHTML = (getapi(api_call));
    followersLeft = followers[0];
    followersRight = followers[1];
   
  }

  
  function isLeftCorrect(){
    
    if(followersLeft > followersRight){
        console.log(followersLeft);
        console.log(followersRight);
      document.getElementById("score").innerHTML = score+=1;
      const api_call = "https://v1.nocodeapi.com/theifhawk/spotify/cnBRhVmxDYwbcgKY/search?q=" + generateRandomSearch() + "&type=artist&perPage=1";
      console.log(data);
      document.getElementById("option2").innerHTML = (getapiSingleLeft(api_call));
    }
  }

  function isRightCorrect(){
    
      if(followersRight > followersLeft){
        console.log(followersLeft);
      console.log(followersRight);
        document.getElementById("score").innerHTML = score+=1;
        const api_call = "https://v1.nocodeapi.com/theifhawk/spotify/cnBRhVmxDYwbcgKY/search?q=" + generateRandomSearch() + "&type=artist&perPage=1";
        document.getElementById("option1").innerHTML = (getapiSingleRight(api_call));
      }
    
  }

      
      </script>


    <div id="root"></div>
    <div>
      <center>
        <h1 id="lol">Higher or Lower Game: Spotify Artist Followers Edition!</h1>
        <button class="start" id="start" onclick = "startGame()"> START </button>
      </center>
    <div>
      <div>
        <center>
          <div class="parent">
            <div class="sub">
              <p class="left" id="option1">Artist</p>
              <button type= "button" id="leftCorrect" onclick="isLeftCorrect()"> More Followers </button>
            </div>
            <div class="sub">
              <p class="right" id="option2">Artist</p>
              <button type = "button" id="rightCorrect" onclick="isRightCorrect()"> More Followers </button>
            </div>
          </div>
        </center>
      </div>
      <br />
      <div>
        <p class="score" id = "score" >score:</p>
      </div>
       
    <!--
      This HTML file is a template.
      If you open it directly in the browser, you will see an empty page.

      You can add webfonts, meta tags, or analytics to this file.
      The build step will place the bundled scripts into the <body> tag.

      To begin the development, run `npm start` or `yarn start`.
      To create a production bundle, use `npm run build` or `yarn build`.
    -->
  </body>
</html>

